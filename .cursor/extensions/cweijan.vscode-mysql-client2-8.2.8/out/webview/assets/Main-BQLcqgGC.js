import{Fragment as e,KeepAlive as t,computed as n,createBaseVNode as r,createBlock as i,createCommentVNode as a,createElementBlock as o,createTextVNode as s,createVNode as c,defineComponent as l,handler as u,normalizeClass as d,onMounted as f,openBlock as p,ref as m,renderList as h,resolveComponent as g,resolveDynamicComponent as _,toDisplayString as v,unref as y,withCtx as b,withDirectives as x}from"./vscode-ByQLBi_r.js";import{Transition as S,vShow as C}from"./focus-trap-CSSWZImT.js";import"./pinia-BVG5H93L.js";import{$t as w,error as T}from"./notify-Bq8ZgKm0.js";import{useRouter as E}from"./vue-router-DsVmzKDA.js";import{__plugin_vue_export_helper_default as D}from"./_plugin-vue_export-helper-C32SG5g-.js";import"./defaultConfig-D-7QJuhd.js";import{useCoreStore as O}from"./coreStore-QYxDL9fh.js";import{vscode_default as k}from"./vscode-BtjFstXW.js";import{DatabaseType as A,isNoSQL as j}from"./constants-AMjnVokj.js";import"./wrapper-CadLjvIo.js";import"./objectUtil-BEldwiwk.js";import"./arrayUtil-CHX6zk14.js";import{useResultUIStore as M}from"./resultUIStore-CecHFWGl.js";const N={id:`tableTab`,class:`tab`},P=[`onClick`];var F=l({__name:`Main`,setup(l){let D=E(),F=M(),I=O(),L=m(null),R=m(!1),z=m(`result`),B=n(()=>[{id:`design`,i18n:`table.design`,icon:`codicon-edit`,disabled:()=>!R.value},{id:`result`,i18n:`table.data`,icon:`codicon-database blue`},{id:`log`,i18n:`common.log`,icon:`codicon-file`,hidden:()=>L.value==A.ES},{id:`erDiagram`,i18n:`table.erDiagram`,icon:`codicon-symbol-class yellow`,hidden:()=>j(L.value),disabled:()=>!R.value||j(L.value)},{id:`status`,i18n:`table.monitor`,icon:`codicon-graph-line`,disabled:()=>!F.monitorStatus.hasAnyMonitor,hidden:()=>j(L.value)},{id:`es-status`,i18n:`table.monitor`,icon:`codicon-graph-line`,hidden:()=>L.value!=A.ES}].filter(e=>{var t;return!(t=e.hidden)?.call(e)})),V=e=>{typeof e==`string`&&(e={id:e});let{id:t,disabled:n}=e;n?.()||z.value!==t&&(z.value=t,D.push(t),t==`log`&&u.emit(`initTerminal`))};f(()=>{z.value=D.currentRoute.value.name,window.addEventListener(`message`,({data:e})=>{[`RUN`,`DATA`].includes(e.type)&&(L.value=e.content.dbType,[`design`,`result`,`erDiagram`].includes(z.value)||V(`result`))}),u.on(`table_info`,({singleTable:e,dbType:t,monitorStatus:n})=>{L.value=t,R.value=e,Object.assign(F.monitorStatus,n),R.value||V(`result`)})});let H=()=>{u.emit(`editInVSCode`,F.toolbar.sql)},U=()=>{if(!I.isPay)return T(w(`plan.premiumNotice`));u.emit(`viewJSON`)};return(n,l)=>{let f=g(`vsc-tooltip`),m=g(`router-view`);return p(),o(`div`,null,[x(r(`ul`,N,[(p(!0),o(e,null,h(B.value,(e,t)=>{var n;return p(),o(`li`,{key:t,class:d([`tab__item`,{"tab__item--active":z.value==e.id,disabled:(n=e.disabled)?.call(e)}]),onClick:t=>V(e)},[e.icon?(p(),o(`i`,{key:0,type:`icon`,class:d(e.icon),style:{position:`relative`,top:`3px`}},null,2)):a(``,!0),s(` `+v(y(w)(e.i18n)),1)],10,P)}),128)),c(f,{title:y(w)(`table.editInVSCode`)},{default:b(()=>[r(`div`,{class:`panel-icon !pl-2`,style:{"border-left":`1px solid var(--border-color)`},onClick:H},l[1]||=[r(`img`,{src:k,alt:`VSCode Logo`},null,-1)])]),_:1},8,[`title`]),c(f,{title:y(w)(`table.viewAsJSON`)},{default:b(()=>[r(`div`,{class:`panel-icon`,onClick:U},l[2]||=[r(`i`,{class:`codicon-json text-yellow`},null,-1)])]),_:1},8,[`title`]),c(f,{title:y(w)(`table.history`)},{default:b(()=>[r(`div`,{class:`panel-icon`,onClick:l[0]||=e=>y(u).emit(`viewHistory`)},l[3]||=[r(`i`,{class:`codicon-history`},null,-1)])]),_:1},8,[`title`])],512),[[C,y(F).showSQLPanel]]),c(m,null,{default:b(({Component:e})=>[c(S,null,{default:b(()=>[(p(),i(t,null,[(p(),i(_(e)))],1024))]),_:2},1024)]),_:1})])}}}),I=D(F,[[`__scopeId`,`data-v-26cb6133`]]);export{I as default};